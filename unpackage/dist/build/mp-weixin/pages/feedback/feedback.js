(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/feedback/feedback"],{1471:function(e,t,n){},b17a:function(e,t,n){"use strict";n.r(t);var a=n("e8ef"),i=n("ba18");for(var u in i)"default"!==u&&function(e){n.d(t,e,(function(){return i[e]}))}(u);n("e18d");var c,o=n("f0c5"),r=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],c);t["default"]=r.exports},ba18:function(e,t,n){"use strict";n.r(t);var a=n("f42b"),i=n.n(a);for(var u in a)"default"!==u&&function(e){n.d(t,e,(function(){return a[e]}))}(u);t["default"]=i.a},c4fc:function(e,t,n){"use strict";(function(e){n("4bbf");a(n("66fd"));var t=a(n("b17a"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},e18d:function(e,t,n){"use strict";var a=n("1471"),i=n.n(a);i.a},e8ef:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return a}));var a={uniIcons:function(){return Promise.all([n.e("common/vendor"),n.e("components/uni-icons/uni-icons")]).then(n.bind(null,"4a7a"))}},i=function(){var e=this,t=e.$createElement;e._self._c},u=[]},f42b:function(e,t,n){"use strict";(function(e,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=u(n("a34a"));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n,a,i,u,c){try{var o=e[u](c),r=o.value}catch(f){return void n(f)}o.done?t(r):Promise.resolve(r).then(a,i)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var u=e.apply(t,n);function o(e){c(u,a,i,o,r,"next",e)}function r(e){c(u,a,i,o,r,"throw",e)}o(void 0)}))}}var r={data:function(){return{imageList:[],imageNameList:[],content:""}},methods:{AddImage:function(){var t=this,n=5-this.imageList.length;e.chooseImage({count:n,success:function(e){var a=e.tempFilePaths,i=e.tempFiles;a.forEach((function(e,a){a<n&&t.imageList.push({url:e})})),i.forEach((function(e,a){a<n&&t.imageNameList.push({name:e.name})}))}})},DelImage:function(e){this.imageList.splice(e,1)},Smbmit:function(){var t=this;return o(i.default.mark((function n(){var a,u,c,o,r;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a={imagePath:u,content:t.content},u=[],e.showLoading(),c=0;case 4:if(!(c<t.imageList.length)){n.next=14;break}return o=t.imageList[c].url,r=t.imageNameList[c].name,n.next=9,t.uploadFiles({filePath:o,fileName:r});case 9:o=n.sent,u.push(o);case 11:c++,n.next=4;break;case 14:t.SetUpdateFeedback(a);case 15:case"end":return n.stop()}}),n)})))()},uploadFiles:function(e){return o(i.default.mark((function t(){var n,u,c;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.filePath,u=e.fileName,t.next=3,a.uploadFile({filePath:n,cloudPath:u});case 3:return c=t.sent,t.abrupt("return",c.fileID);case 5:case"end":return t.stop()}}),t)})))()},SetUpdateFeedback:function(t){this.$api.update_feedback({feedbackImages:t.imagePath,content:t.content}).then((function(t){e.hideLoading(),e.showToast({title:"提交反馈成功",icon:"none"}),setTimeout((function(){e.switchTab({url:"/pages/tabbar/my/my"})}),2e3)})).catch((function(){e.hideLoading(),e.showToast({title:"提交反馈成功",icon:"none"})}))}}};t.default=r}).call(this,n("543d")["default"],n("a9ff")["default"])}},[["c4fc","common/runtime","common/vendor"]]]);